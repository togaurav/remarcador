<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
    

<sqlMap namespace="Remarcador">


	<resultMap class="cl.wamtech.remarcador.model.Remarcador" id="resultMap.Remarcador">
		<result column="id" property="id" nullValue="-1" />
		<result column="nombre" property="nombre" />
		<result column="local_remarcador" property="localRemarcador" />
		<result column="marca_remarcador" property="marcaRemarcador" />
		<result column="modelo_remarcador" property="modeloRemarcador" />
		<result column="multiplicador" property="multiplicador" nullValue="-1" />
		<result column="tablero" property="tablero" />
		<result column="numero_medidor" property="numeroMedidor" />
		<result column="nodo" property="nodo" />
		<result column="observacion" property="observacion" />
		<result column="id_centro_costo" property="centroCosto" resultMap="resultMap.CentroCosto"/>
		<result column="id_cuenta" property="cuenta" resultMap="resultMap.Cuenta"/>
	</resultMap>
	


	<resultMap class="cl.wamtech.remarcador.model.Remarcador" id="resultMap.nodep1.Remarcador">
		<result column="id" property="id" nullValue="-1" />
		<result column="nombre" property="nombre" />
		<result column="local_remarcador" property="localRemarcador" />
		<result column="marca_remarcador" property="marcaRemarcador" />
		<result column="modelo_remarcador" property="modeloRemarcador" />
		<result column="multiplicador" property="multiplicador" nullValue="-1" />
		<result column="tablero" property="tablero" />
		<result column="numero_medidor" property="numeroMedidor" />
		<result column="nodo" property="nodo" />
		<result column="observacion" property="observacion" />
		<result column="id_centro_costo" property="centroCosto.id" />
		<result column="id_cuenta" property="cuenta.id" />
	</resultMap>
	

	<typeAlias alias="Remarcador" type="cl.wamtech.remarcador.model.Remarcador" />

	<select id="get.Remarcador" parameterClass="int" resultMap="resultMap.Remarcador">
		SELECT * FROM remarcadores
		WHERE id = #id#
	</select>

	<select id="get.equals.Remarcador" parameterClass="java.util.Map" resultMap="resultMap.Remarcador"> 
		SELECT * FROM remarcadores
		WHERE 
	</select>

	<select id="get.list.Remarcador" resultMap="resultMap.Remarcador" >
		SELECT * FROM remarcadores
	</select> 
  	
  	<select id="get.count.list.Remarcador" resultClass="int">
		SELECT count(id) FROM remarcadores
	</select>
  	
	<select id="get.criterio.Remarcador" parameterClass="java.util.Map" resultMap="resultMap.nodep1.Remarcador">
		SELECT * FROM remarcadores
		
		<dynamic prepend="WHERE">
		
		<isNotEmpty property="id" prepend="AND">
			remarcadores.id = #id#
		</isNotEmpty>
		
		<isNotEmpty property="nombre" prepend="AND">
			remarcadores.nombre = #nombre#
		</isNotEmpty>
		
		<isNotEmpty property="localRemarcador" prepend="AND">
			remarcadores.local_remarcador = #localRemarcador#
		</isNotEmpty>
		
		<isNotEmpty property="marcaRemarcador" prepend="AND">
			remarcadores.marca_remarcador = #marcaRemarcador#
		</isNotEmpty>
		
		<isNotEmpty property="modeloRemarcador" prepend="AND">
			remarcadores.modelo_remarcador = #modeloRemarcador#
		</isNotEmpty>
		
		<isNotEmpty property="multiplicador" prepend="AND">
			remarcadores.multiplicador = #multiplicador#
		</isNotEmpty>
		
		<isNotEmpty property="tablero" prepend="AND">
			remarcadores.tablero = #tablero#
		</isNotEmpty>
		
		<isNotEmpty property="numeroMedidor" prepend="AND">
			remarcadores.numero_medidor = #numeroMedidor#
		</isNotEmpty>
		
		<isNotEmpty property="nodo" prepend="AND">
			remarcadores.nodo = #nodo#
		</isNotEmpty>
		
		<isNotEmpty property="observacion" prepend="AND">
			remarcadores.observacion = #observacion#
		</isNotEmpty>
		
		<isNotEmpty property="centroCostoId" prepend="AND">
			remarcadores.id_centro_costo = #centroCostoId#
		</isNotEmpty>
		
		<isNotEmpty property="cuentaId" prepend="AND">
			remarcadores.id_cuenta = #cuentaId#
		</isNotEmpty>
		
		</dynamic>
		
	</select>
	
	<select id="get.count.criterio.Remarcador" parameterClass="java.util.Map" resultClass="int">
		SELECT count(id) FROM remarcadores
		
		<dynamic prepend="WHERE">
		
		<isNotEmpty property="id" prepend="AND">
			remarcadores.id = #id#
		</isNotEmpty>
		
		<isNotEmpty property="nombre" prepend="AND">
			remarcadores.nombre = #nombre#
		</isNotEmpty>
		
		<isNotEmpty property="localRemarcador" prepend="AND">
			remarcadores.local_remarcador = #localRemarcador#
		</isNotEmpty>
		
		<isNotEmpty property="marcaRemarcador" prepend="AND">
			remarcadores.marca_remarcador = #marcaRemarcador#
		</isNotEmpty>
		
		<isNotEmpty property="modeloRemarcador" prepend="AND">
			remarcadores.modelo_remarcador = #modeloRemarcador#
		</isNotEmpty>
		
		<isNotEmpty property="multiplicador" prepend="AND">
			remarcadores.multiplicador = #multiplicador#
		</isNotEmpty>
		
		<isNotEmpty property="tablero" prepend="AND">
			remarcadores.tablero = #tablero#
		</isNotEmpty>
		
		<isNotEmpty property="numeroMedidor" prepend="AND">
			remarcadores.numero_medidor = #numeroMedidor#
		</isNotEmpty>
		
		<isNotEmpty property="nodo" prepend="AND">
			remarcadores.nodo = #nodo#
		</isNotEmpty>
		
		<isNotEmpty property="observacion" prepend="AND">
			remarcadores.observacion = #observacion#
		</isNotEmpty>
		
		<isNotEmpty property="centroCostoId" prepend="AND">
			remarcadores.id_centro_costo = #centroCostoId#
		</isNotEmpty>
		
		<isNotEmpty property="cuentaId" prepend="AND">
			remarcadores.id_cuenta = #cuentaId#
		</isNotEmpty>
		
		</dynamic>
		
	</select>
	
	<!-- 
	<select id="get.count.depends.Remarcador" parameterClass="Remarcador" resultClass="Integer">
			
	</select>
	 -->	
	
	<insert id="insert.Remarcador" parameterClass="Remarcador">
		
		<selectKey resultClass="int" keyProperty="id" type="post">
			SELECT LAST_INSERT_ID() AS id
		</selectKey>
		
		INSERT INTO remarcadores (nombre ,local_remarcador ,marca_remarcador ,modelo_remarcador ,multiplicador ,tablero ,numero_medidor ,nodo ,observacion ,id_centro_costo ,id_cuenta )
		VALUES(#nombre# ,#localRemarcador# ,#marcaRemarcador# ,#modeloRemarcador# ,#multiplicador# ,#tablero# ,#numeroMedidor# ,#nodo# ,#observacion# ,#centroCosto.id# ,#cuenta.id# )

	</insert>
   
	<update id="update.Remarcador" parameterClass="Remarcador">

		UPDATE remarcadores
		
		<dynamic prepend="SET">
		
			<isNotEmpty property="nombre" prepend=",">
				nombre = #nombre#
			</isNotEmpty>
		
			<isNotEmpty property="localRemarcador" prepend=",">
				local_remarcador = #localRemarcador#
			</isNotEmpty>
		
			<isNotEmpty property="marcaRemarcador" prepend=",">
				marca_remarcador = #marcaRemarcador#
			</isNotEmpty>
		
			<isNotEmpty property="modeloRemarcador" prepend=",">
				modelo_remarcador = #modeloRemarcador#
			</isNotEmpty>
		
			<isNotEqual property="multiplicador" compareValue="0" prepend=",">
				multiplicador = #multiplicador#
			</isNotEqual>
		
			<isNotEmpty property="tablero" prepend=",">
				tablero = #tablero#
			</isNotEmpty>
		
			<isNotEmpty property="numeroMedidor" prepend=",">
				numero_medidor = #numeroMedidor#
			</isNotEmpty>
		
			<isNotEmpty property="nodo" prepend=",">
				nodo = #nodo#
			</isNotEmpty>
		
			<isNotEmpty property="observacion" prepend=",">
				observacion = #observacion#
			</isNotEmpty>
		
			<isNotEmpty property="centroCosto.id" prepend=",">
				id_centro_costo = #centroCosto.id#
			</isNotEmpty>
		
			<isNotEmpty property="cuenta.id" prepend=",">
				id_cuenta = #cuenta.id#
			</isNotEmpty>
		
		
		</dynamic>
		
		WHERE id = #id#
	</update>
   
	<delete id="delete.Remarcador" parameterClass="Remarcador">
		DELETE FROM remarcadores
		WHERE id = #id#
	</delete>
    
</sqlMap>